<!-- visualizations.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .visualization-link {
            margin: 20px;
        }
    </style>
    <!-- Add JavaScript to dynamically update the URL -->
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var typeOfRecipeSelect = document.getElementById('typeOfRecipe');
            var visualizationLink = document.getElementById('visualizationLink');

            typeOfRecipeSelect.addEventListener('change', function () {
                var selectedType = this.value;
                var baseUrl = this.dataset.url;
                var updatedUrl = selectedType ? baseUrl.replace('default', selectedType) : baseUrl;

                if (selectedType === 'default') {
                    // Handle default case (e.g., display a message)
                    visualizationLink.href = '#';  // Update href to a placeholder or disable the link
                } else {
                    visualizationLink.href = updatedUrl;
                }
            });
        });


    </script>
    
    

    {% load static %}
    <!-- CSS stylesheet -->
    <link rel="stylesheet" href="{% static 'recipes/styles.css' %}">
</head>
<body>
    <header>
        <!-- Logo linking to the home page -->
        <a class="link" href="{% url 'recipes:home' %}">
            <img src="{% static 'recipes/images/CC_Logo.jpg' %}" alt="Collective Cookbook Logo"><br>
        </a>
        <h1>Visualizations</h1>
        <a class="logout-link" href="{% url 'logout' %}">Logout</a>
    </header>

    <!-- DIFFICULTY -->
    <div class="visualization-link horizontal-centering" style="margin-top: 6%;">
        <h2>Recipe Difficulty Distribution</h2>
        {% if message %}
            <p class="error-message" id="errorMessage">{{ message }}</p>
        {% endif %}

        <!-- Remove the 'onchange' attribute from the select tag -->
        <form id="recipeTypeForm">
            <label for="typeOfRecipe">Select Recipe Type:</label>
            <select id="typeOfRecipe" name="type_of_recipe">
                <option value="" {% if not type_of_recipe %}selected{% endif %}>-- Select --</option>
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
            </select>
        </form>
        <p>Click the link below to view the Recipe Difficulty Distribution:</p>

        <!-- Update the link id and href attribute -->
        <a class="link" id="visualizationLink" href="{% url 'recipes:recipe-difficulty-distribution-detail' type_of_recipe='default' %}">Go to Recipe Difficulty Distribution</a>
    </div>



    <!--TYPE-->
    <div class="visualization-link horizontal-centering">
        <h2>Recipe Type Distribution</h2>
        <p>Click the link below to view the Recipe Type Distribution:</p>
        <a class="link" id="typeDistributionLink" href="{% url 'recipes:recipe-type-distribution-detail' type_of_recipe='default' %}">Go to Recipe Type Distribution</a>
    </div>



   <!--RECIPES PER MONTH-->
    <div class="visualization-link horizontal-centering">
        <h2>Recipes Created Per Month</h2>
        <p>Click the link below to view the Recipes Created Per Month:</p>
        <a class="link" href="{% url 'recipes:recipes-created-per-month-detail' %}">Go to Recipes Created Per Month</a>
    </div>

    <div class="background-container">
        <!-- Footer with a background image -->
        <footer style="background: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2)), url('{% static 'recipes/images/tomatoes-near-mushrooms-herbs.jpg' %}'); background-size: cover; background-repeat: no-repeat; background-position: center bottom; position: fixed; bottom: 0; left: 0; right: 0; height: 21%;">
            <img src="{% static 'recipes/images/tomatoes-near-mushrooms-herbs.jpg' %}" alt="Background Image" style="width: 100%; height: auto; opacity: 0.7;">
            <!-- Attribution details inside the footer -->
            <div class="attribution-details">
                Image by <a href="https://www.freepik.com/free-photo/tomatoes-near-mushrooms-herbs_2377752.htm#query=food%20ingredients&position=22&from_view=keyword&track=ais&uuid=e26e1fb1-6ad4-47f1-a890-f41a3f3011f3">Freepik</a>
            </div>
        </footer>
    </div>

</body>
</html>
